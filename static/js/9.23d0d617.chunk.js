(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{954:function(e,t,a){"use strict";a.r(t);var n=a(227),l=a(228),r=a(231),c=a(229),o=a(230),s=a(4),i=a.n(s),u=a(86),m=a(946),h=a(945),d=a(937),p=a(938),f=a(947),g=a(939),E=a(940),S=a(941),b=a(942),v=a(943),k=a(944),y=function(e){return i.a.createElement(d.a,{className:"justify-content-center"},i.a.createElement(p.a,{md:"8"},i.a.createElement(g.a,null,i.a.createElement(E.a,{className:"p-4"},i.a.createElement(S.a,null,i.a.createElement(b.a,null,i.a.createElement("h1",null,"Search Planet"),i.a.createElement(v.a,{className:"mb-3"},i.a.createElement(k.a,{type:"text",placeholder:"Search planet by name",onChange:e.changes}))))))))},w=a(894),x=a.n(w),I=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(c.a)(t).call(this,e))).onSearchHandler=function(e){a.setState({loading:!0,searchText:e.target.value},function(){if(a.state.searchText){if("Luke Skywalker"!==localStorage.getItem("username")&&(console.log(a.state.searchCount),a.state.searchCount>=15))return a.setState({limitExceeded:!0,loading:!1,canSearch:"You can search 15 times in a minute."}),void a.resetLimit();a.searchPopulation(a.state.searchText)}else a.setState({loading:!1,planetData:null})})},a.searchPopulation=function(e){x.a.get("https://swapi.co/api/planets/").then(function(t){var n=t.data.results.filter(function(t){return t.name.search(e)>-1&&t}).sort(function(e,t){return e.population-t.population});n.length>0?a.setState({loading:!1,planetData:n}):a.setState({loading:!1,planetData:null}),"Luke Skywalker"!==localStorage.getItem("username")&&a.setState({searchCount:a.state.searchCount+1})}).catch(function(e){return console.log(e)})},a.resetLimit=function(){var e=setInterval(function(){return a.tick()},1e3);setTimeout(function(){a.setState({searchCount:0,limitExceeded:!1,canSearch:"You can search again"}),clearInterval(e)},6e4)},a.tick=function(){a.setState({countDown:a.state.countDown-1})},"true"!==localStorage.getItem("user_logged_in")&&a.props.history.push("/login"),a.state={planetData:null,searchText:null,loading:!1,searchCount:0,limitExceeded:!1,canSearch:null,countDown:59},a}return Object(o.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=i.a.createElement(h.a,null,"No Planet");return this.state.planetData&&(e=this.state.planetData.map(function(e,t){return i.a.createElement(h.a,{style:{fontSize:2*t+12+"px"},key:e.name},e.name," : ",e.population)})),this.state.loading&&(e=i.a.createElement("div",{className:"animated fadeIn pt-1 text-center"}," Loading... ")),this.state.searchCount>15&&"Luke Skywalker"!==localStorage.getItem("username")&&(e=i.a.createElement("div",{className:"animated fadeIn pt-1 text-center",style:{color:"red"}}," ",this.state.canSearch," Time Left: ",this.state.countDown)),0===this.state.searchCount&&"Luke Skywalker"!==localStorage.getItem("username")&&(e=i.a.createElement("div",{className:"animated fadeIn pt-1 text-center",style:{color:"green"}}," ",this.state.canSearch,"  ")),i.a.createElement(m.a,null,i.a.createElement(y,{changes:this.onSearchHandler}),i.a.createElement(d.a,{className:"justify-content-center"},i.a.createElement(p.a,{md:"8"},i.a.createElement(f.a,null,e))))}}]),t}(s.Component),j=a(936),N=i.a.lazy(function(){return a.e(7).then(a.bind(null,948))}),O=i.a.lazy(function(){return Promise.all([a.e(4),a.e(8)]).then(a.bind(null,949))}),C=function(e){function t(){var e,a;Object(n.a)(this,t);for(var l=arguments.length,o=new Array(l),s=0;s<l;s++)o[s]=arguments[s];return(a=Object(r.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(o)))).loading=function(){return i.a.createElement("div",{className:"animated fadeIn pt-1 text-center"},"Loading...")},a}return Object(o.a)(t,e),Object(l.a)(t,[{key:"signOut",value:function(e){e.preventDefault(),localStorage.removeItem("user_logged_in"),localStorage.removeItem("username"),this.props.history.push("/login")}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"app"},i.a.createElement(j.b,{fixed:!0},i.a.createElement(s.Suspense,{fallback:this.loading()},i.a.createElement(O,{onLogout:function(t){return e.signOut(t)}}))),i.a.createElement("div",{className:"app-body"},i.a.createElement("main",{className:"main"},i.a.createElement(m.a,{fluid:!0},i.a.createElement(s.Suspense,{fallback:this.loading()},i.a.createElement(u.b,{path:"",name:"/dashboard",component:I}),i.a.createElement(u.a,{from:"/",to:"/dashboard"}))))),i.a.createElement(j.a,null,i.a.createElement(s.Suspense,{fallback:this.loading()},i.a.createElement(N,null))))}}]),t}(s.Component);t.default=C}}]);
//# sourceMappingURL=9.23d0d617.chunk.js.map